<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop - ASKT</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="container">
                <a href="index.html" class="brand">ASKT</a>
                <ul class="nav-menu" id="navMenu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="shop.html">Shop</a></li>
                    <li><a href="men.html">Men</a></li>
                    <li><a href="women.html">Women</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="cart.html" class="cart-link">Cart (<span id="cartCount">0</span>)</a></li>
                </ul>
                <div class="mobile-toggle" id="mobileToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>
    </header>

    <!-- Shop Section -->
    <section class="products" style="padding-top: 8rem;">
        <div class="container">
            <h2 class="section-title">All Products</h2>
            
            <!-- Search Bar -->
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search products..." onkeyup="filterProducts()">
            </div>

            <!-- Filters -->
            <div class="filters">
                <button class="filter-btn active" onclick="filterByCategory('all')">All</button>
                <button class="filter-btn" onclick="filterByCategory('Men')">Men</button>
                <button class="filter-btn" onclick="filterByCategory('Women')">Women</button>
            </div>

            <!-- Products Grid -->
            <div class="products-grid" id="productsGrid">
                <!-- Products will be loaded via JavaScript -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>ASKT</h4>
                    <p>Premium streetwear for the bold and fearless.</p>
                </div>
                <div class="footer-section">
                    <h4>Shop</h4>
                    <ul>
                        <li><a href="shop.html">All Products</a></li>
                        <li><a href="men.html">Men's Collection</a></li>
                        <li><a href="women.html">Women's Collection</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="contact.html">Contact Us</a></li>
                        <li><a href="about.html">About</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 ASKT. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="js/config.js"></script>
    <script src="js/main.js"></script>
    <script src="js/cart.js"></script>
    <script>
        let allProducts = [];
        let currentCategory = 'all';

        async function loadProducts() {
            try {
                const response = await fetch(`${API_BASE_URL}/products`);
                allProducts = await response.json();
                displayProducts(allProducts);
            } catch (error) {
                console.error('Error loading products:', error);
                document.getElementById('productsGrid').innerHTML = '<p class="empty-state">Unable to load products. Please check your connection.</p>';
            }
        }

        function displayProducts(products) {
            const grid = document.getElementById('productsGrid');
            
            if (products.length === 0) {
                grid.innerHTML = '<p class="empty-state">No products found</p>';
                return;
            }

            grid.innerHTML = products.map(product => `
                <div class="product-card">
                    <div class="product-image">
                        <img src="${product.image || 'https://via.placeholder.com/300x400?text=ASKT'}" alt="${product.name}">
                    </div>
                    <div class="product-info">
                        <h3>${product.name}</h3>
                        <p>${product.category}</p>
                        <span class="product-price">â‚¹${product.price}</span>
                        <a href="product.html?id=${product._id}" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">View Product</a>
                    </div>
                </div>
            `).join('');
        }

        function filterByCategory(category) {
            currentCategory = category;
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            let filtered = allProducts;
            if (category !== 'all') {
                filtered = allProducts.filter(p => p.category === category);
            }
            displayProducts(filtered);
        }

        function filterProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            let filtered = allProducts;

            if (currentCategory !== 'all') {
                filtered = filtered.filter(p => p.category === currentCategory);
            }

            if (searchTerm) {
                filtered = filtered.filter(p => 
                    p.name.toLowerCase().includes(searchTerm) ||
                    p.category.toLowerCase().includes(searchTerm)
                );
            }

            displayProducts(filtered);
        }

        loadProducts();
    </script>
</body>
</html>
